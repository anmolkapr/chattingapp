{"ast":null,"code":"import { createElement, createRef, Component } from 'react';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \".styles_scrollable-div__prSCv {\\r\\n  max-height: inherit;\\r\\n  height: inherit;\\r\\n  overflow-y: auto;\\r\\n}\\r\\n\";\nvar styles = {\n  \"scrollable-div\": \"styles_scrollable-div__prSCv\",\n  \"scrollableDiv\": \"styles_scrollable-div__prSCv\"\n};\nstyleInject(css_248z);\n\nvar ScrollableFeed =\n/** @class */\nfunction (_super) {\n  __extends(ScrollableFeed, _super);\n\n  function ScrollableFeed(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.bottomRef = createRef();\n    _this.wrapperRef = createRef();\n    _this.handleScroll = _this.handleScroll.bind(_this);\n    return _this;\n  }\n\n  ScrollableFeed.prototype.getSnapshotBeforeUpdate = function () {\n    if (this.wrapperRef.current && this.bottomRef.current) {\n      var viewableDetectionEpsilon = this.props.viewableDetectionEpsilon;\n      return ScrollableFeed.isViewable(this.wrapperRef.current, this.bottomRef.current, viewableDetectionEpsilon); //This argument is passed down to componentDidUpdate as 3rd parameter\n    }\n\n    return false;\n  };\n\n  ScrollableFeed.prototype.componentDidUpdate = function (previousProps, _a, snapshot) {\n    var _b = this.props,\n        forceScroll = _b.forceScroll,\n        changeDetectionFilter = _b.changeDetectionFilter;\n    var isValidChange = changeDetectionFilter(previousProps, this.props);\n\n    if (isValidChange && (forceScroll || snapshot) && this.bottomRef.current && this.wrapperRef.current) {\n      this.scrollParentToChild(this.wrapperRef.current, this.bottomRef.current);\n    }\n  };\n\n  ScrollableFeed.prototype.componentDidMount = function () {\n    //Scroll to bottom from the start\n    if (this.bottomRef.current && this.wrapperRef.current) {\n      this.scrollParentToChild(this.wrapperRef.current, this.bottomRef.current);\n    }\n  };\n  /**\r\n   * Scrolls a parent element such that the child element will be in view\r\n   * @param parent\r\n   * @param child\r\n   */\n\n\n  ScrollableFeed.prototype.scrollParentToChild = function (parent, child) {\n    var viewableDetectionEpsilon = this.props.viewableDetectionEpsilon;\n\n    if (!ScrollableFeed.isViewable(parent, child, viewableDetectionEpsilon)) {\n      //Source: https://stackoverflow.com/a/45411081/6316091\n      var parentRect = parent.getBoundingClientRect();\n      var childRect = child.getBoundingClientRect(); //Scroll by offset relative to parent\n\n      var scrollOffset = childRect.top + parent.scrollTop - parentRect.top;\n      var _a = this.props,\n          animateScroll = _a.animateScroll,\n          onScrollComplete = _a.onScrollComplete;\n\n      if (animateScroll) {\n        animateScroll(parent, scrollOffset);\n        onScrollComplete();\n      }\n    }\n  };\n  /**\r\n   * Returns whether a child element is visible within a parent element\r\n   *\r\n   * @param parent\r\n   * @param child\r\n   * @param epsilon\r\n   */\n\n\n  ScrollableFeed.isViewable = function (parent, child, epsilon) {\n    epsilon = epsilon || 0; //Source: https://stackoverflow.com/a/45411081/6316091\n\n    var parentRect = parent.getBoundingClientRect();\n    var childRect = child.getBoundingClientRect();\n    var childTopIsViewable = childRect.top >= parentRect.top;\n    var childOffsetToParentBottom = parentRect.top + parent.clientHeight - childRect.top;\n    var childBottomIsViewable = childOffsetToParentBottom + epsilon >= 0;\n    return childTopIsViewable && childBottomIsViewable;\n  };\n  /**\r\n   * Fires the onScroll event, sending isAtBottom boolean as its first parameter\r\n   */\n\n\n  ScrollableFeed.prototype.handleScroll = function () {\n    var _a = this.props,\n        viewableDetectionEpsilon = _a.viewableDetectionEpsilon,\n        onScroll = _a.onScroll;\n\n    if (onScroll && this.bottomRef.current && this.wrapperRef.current) {\n      var isAtBottom = ScrollableFeed.isViewable(this.wrapperRef.current, this.bottomRef.current, viewableDetectionEpsilon);\n      onScroll(isAtBottom);\n    }\n  };\n  /**\r\n   * Scroll to the bottom\r\n   */\n\n\n  ScrollableFeed.prototype.scrollToBottom = function () {\n    if (this.bottomRef.current && this.wrapperRef.current) {\n      this.scrollParentToChild(this.wrapperRef.current, this.bottomRef.current);\n    }\n  };\n\n  ScrollableFeed.prototype.render = function () {\n    var _a = this.props,\n        children = _a.children,\n        className = _a.className;\n    var joinedClassName = styles.scrollableDiv + (className ? \" \" + className : \"\");\n    return createElement(\"div\", {\n      className: joinedClassName,\n      ref: this.wrapperRef,\n      onScroll: this.handleScroll\n    }, children, createElement(\"div\", {\n      ref: this.bottomRef\n    }));\n  };\n\n  ScrollableFeed.defaultProps = {\n    forceScroll: false,\n    animateScroll: function (element, offset) {\n      if (element.scrollBy) {\n        element.scrollBy({\n          top: offset\n        });\n      } else {\n        element.scrollTop = offset;\n      }\n    },\n    onScrollComplete: function () {},\n    changeDetectionFilter: function () {\n      return true;\n    },\n    viewableDetectionEpsilon: 2,\n    onScroll: function () {}\n  };\n  return ScrollableFeed;\n}(Component);\n\nexport default ScrollableFeed;","map":{"version":3,"mappings":"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","names":["createElement","createRef","Component","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","css_248z","styles","ScrollableFeed","_super","props","_this","call","bottomRef","wrapperRef","handleScroll","bind","getSnapshotBeforeUpdate","current","viewableDetectionEpsilon","isViewable","componentDidUpdate","previousProps","_a","snapshot","_b","forceScroll","changeDetectionFilter","isValidChange","scrollParentToChild","componentDidMount","parent","child","parentRect","getBoundingClientRect","childRect","scrollOffset","top","scrollTop","animateScroll","onScrollComplete","epsilon","childTopIsViewable","childOffsetToParentBottom","clientHeight","childBottomIsViewable","onScroll","isAtBottom","scrollToBottom","render","children","className","joinedClassName","scrollableDiv","defaultProps","element","offset","scrollBy"],"sources":["C:/CHATAPP/frontend/node_modules/react-scrollable-feed/dist/index.es.js"],"sourcesContent":["import { createElement, createRef, Component } from 'react';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\n\nfunction styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \".styles_scrollable-div__prSCv {\\r\\n  max-height: inherit;\\r\\n  height: inherit;\\r\\n  overflow-y: auto;\\r\\n}\\r\\n\";\nvar styles = {\"scrollable-div\":\"styles_scrollable-div__prSCv\",\"scrollableDiv\":\"styles_scrollable-div__prSCv\"};\nstyleInject(css_248z);\n\nvar ScrollableFeed = /** @class */ (function (_super) {\r\n    __extends(ScrollableFeed, _super);\r\n    function ScrollableFeed(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.bottomRef = createRef();\r\n        _this.wrapperRef = createRef();\r\n        _this.handleScroll = _this.handleScroll.bind(_this);\r\n        return _this;\r\n    }\r\n    ScrollableFeed.prototype.getSnapshotBeforeUpdate = function () {\r\n        if (this.wrapperRef.current && this.bottomRef.current) {\r\n            var viewableDetectionEpsilon = this.props.viewableDetectionEpsilon;\r\n            return ScrollableFeed.isViewable(this.wrapperRef.current, this.bottomRef.current, viewableDetectionEpsilon); //This argument is passed down to componentDidUpdate as 3rd parameter\r\n        }\r\n        return false;\r\n    };\r\n    ScrollableFeed.prototype.componentDidUpdate = function (previousProps, _a, snapshot) {\r\n        var _b = this.props, forceScroll = _b.forceScroll, changeDetectionFilter = _b.changeDetectionFilter;\r\n        var isValidChange = changeDetectionFilter(previousProps, this.props);\r\n        if (isValidChange && (forceScroll || snapshot) && this.bottomRef.current && this.wrapperRef.current) {\r\n            this.scrollParentToChild(this.wrapperRef.current, this.bottomRef.current);\r\n        }\r\n    };\r\n    ScrollableFeed.prototype.componentDidMount = function () {\r\n        //Scroll to bottom from the start\r\n        if (this.bottomRef.current && this.wrapperRef.current) {\r\n            this.scrollParentToChild(this.wrapperRef.current, this.bottomRef.current);\r\n        }\r\n    };\r\n    /**\r\n     * Scrolls a parent element such that the child element will be in view\r\n     * @param parent\r\n     * @param child\r\n     */\r\n    ScrollableFeed.prototype.scrollParentToChild = function (parent, child) {\r\n        var viewableDetectionEpsilon = this.props.viewableDetectionEpsilon;\r\n        if (!ScrollableFeed.isViewable(parent, child, viewableDetectionEpsilon)) {\r\n            //Source: https://stackoverflow.com/a/45411081/6316091\r\n            var parentRect = parent.getBoundingClientRect();\r\n            var childRect = child.getBoundingClientRect();\r\n            //Scroll by offset relative to parent\r\n            var scrollOffset = (childRect.top + parent.scrollTop) - parentRect.top;\r\n            var _a = this.props, animateScroll = _a.animateScroll, onScrollComplete = _a.onScrollComplete;\r\n            if (animateScroll) {\r\n                animateScroll(parent, scrollOffset);\r\n                onScrollComplete();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Returns whether a child element is visible within a parent element\r\n     *\r\n     * @param parent\r\n     * @param child\r\n     * @param epsilon\r\n     */\r\n    ScrollableFeed.isViewable = function (parent, child, epsilon) {\r\n        epsilon = epsilon || 0;\r\n        //Source: https://stackoverflow.com/a/45411081/6316091\r\n        var parentRect = parent.getBoundingClientRect();\r\n        var childRect = child.getBoundingClientRect();\r\n        var childTopIsViewable = (childRect.top >= parentRect.top);\r\n        var childOffsetToParentBottom = parentRect.top + parent.clientHeight - childRect.top;\r\n        var childBottomIsViewable = childOffsetToParentBottom + epsilon >= 0;\r\n        return childTopIsViewable && childBottomIsViewable;\r\n    };\r\n    /**\r\n     * Fires the onScroll event, sending isAtBottom boolean as its first parameter\r\n     */\r\n    ScrollableFeed.prototype.handleScroll = function () {\r\n        var _a = this.props, viewableDetectionEpsilon = _a.viewableDetectionEpsilon, onScroll = _a.onScroll;\r\n        if (onScroll && this.bottomRef.current && this.wrapperRef.current) {\r\n            var isAtBottom = ScrollableFeed.isViewable(this.wrapperRef.current, this.bottomRef.current, viewableDetectionEpsilon);\r\n            onScroll(isAtBottom);\r\n        }\r\n    };\r\n    /**\r\n     * Scroll to the bottom\r\n     */\r\n    ScrollableFeed.prototype.scrollToBottom = function () {\r\n        if (this.bottomRef.current && this.wrapperRef.current) {\r\n            this.scrollParentToChild(this.wrapperRef.current, this.bottomRef.current);\r\n        }\r\n    };\r\n    ScrollableFeed.prototype.render = function () {\r\n        var _a = this.props, children = _a.children, className = _a.className;\r\n        var joinedClassName = styles.scrollableDiv + (className ? \" \" + className : \"\");\r\n        return (createElement(\"div\", { className: joinedClassName, ref: this.wrapperRef, onScroll: this.handleScroll },\r\n            children,\r\n            createElement(\"div\", { ref: this.bottomRef })));\r\n    };\r\n    ScrollableFeed.defaultProps = {\r\n        forceScroll: false,\r\n        animateScroll: function (element, offset) {\r\n            if (element.scrollBy) {\r\n                element.scrollBy({ top: offset });\r\n            }\r\n            else {\r\n                element.scrollTop = offset;\r\n            }\r\n        },\r\n        onScrollComplete: function () { },\r\n        changeDetectionFilter: function () { return true; },\r\n        viewableDetectionEpsilon: 2,\r\n        onScroll: function () { },\r\n    };\r\n    return ScrollableFeed;\r\n}(Component));\n\nexport default ScrollableFeed;\n"]},"metadata":{},"sourceType":"module"}